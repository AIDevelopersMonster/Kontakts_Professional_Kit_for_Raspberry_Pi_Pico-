# Video https://youtu.be/Ub-NpSWvNr8
# Post http://kontakts.ru/showthread.php/40884?p=86210#post86210
# Telega https://t.me/MrMicroPython
# üìú –õ–∏—Ü–µ–Ω–∑–∏—è üîó Creative Commons Attribution-ShareAlike 4.0 (CC BY-SA)
# üìÇ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø–ª–∞—Ç—ã PicoMate https://wiki.deskpi.com/picomate/#pinout-diagram

import time 
import board 
import busio
from ltr381rgb import LTR381RGB  # –ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø—Ç–∏—á–µ—Å–∫–∏–º —Å–µ–Ω—Å–æ—Ä–æ–º LTR381RGB

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ I2C –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∏–Ω–æ–≤ GP15 (SCL) –∏ GP14 (SDA) –Ω–∞ –ø–ª–∞—Ç–µ
i2c1 = busio.I2C(scl = board.GP15, sda = board.GP14)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–µ–Ω—Å–æ—Ä–∞ LTR381RGB —á–µ—Ä–µ–∑ I2C
optical = LTR381RGB(i2c1) 

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã —Å–µ–Ω—Å–æ—Ä–∞ –Ω–∞ "CS" (Color Sensing, –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –æ—Å–≤–µ—â–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Ü–≤–µ—Ç–∞)
optical.mode = "CS" 

# –í–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–Ω—Å–æ—Ä–∞
optical.enable()

# –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –≤—ã–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö
while True:
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –≤—ã–≤–æ–¥ –∏–∑–º–µ—Ä–µ–Ω–Ω–æ–π –æ—Å–≤–µ—â–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –ª—é–∫—Å–∞—Ö (lux)
    print(f"ALS: {optical.lux} lx") 

    # –í—ã–≤–æ–¥ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏–ª–∏ –∞–Ω–∞–ª–∏–∑–∞)
    print(optical.raw_data) 

    # –ü–∞—É–∑–∞ –Ω–∞ 0.5 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —Ü–∏–∫–ª–æ–º
    time.sleep(0.5)

