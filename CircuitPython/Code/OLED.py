# Video https://youtu.be/XvvTKivE40c
# Post http://kontakts.ru/showthread.php/40884?p=86205#post86205
# Telega https://t.me/MrMicroPython
# üìú –õ–∏—Ü–µ–Ω–∑–∏—è üîó Creative Commons Attribution-ShareAlike 4.0 (CC BY-SA)
# üìÇ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø–ª–∞—Ç—ã PicoMate https://wiki.deskpi.com/picomate/#pinout-diagram
import time  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
import board  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∏–Ω–∞–º–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
import busio  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å I2C, SPI –∏ UART
from adafruit_ssd1306 import SSD1306_I2C  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è OLED-–¥–∏—Å–ø–ª–µ—è SSD1306

# –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç I2C –Ω–∞ –ø–æ—Ä—Ç–∞—Ö GP17 (SCL) –∏ GP16 (SDA)
i2c0 = busio.I2C(scl=board.GP17, sda=board.GP16)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OLED-–¥–∏—Å–ø–ª–µ—è 0.96" —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º 128x64 –ø–∏–∫—Å–µ–ª—è
display = SSD1306_I2C(128, 64, i2c0)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
def display_text(str, line):
    """
    –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Ç–µ–∫—Å—Ç–∞ –Ω–∞ OLED-–¥–∏—Å–ø–ª–µ–µ.

    –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
    str  - —Ç–µ–∫—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    line - –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ (0-7), –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 8 –ø–∏–∫—Å–µ–ª–µ–π –ø–æ –≤—ã—Å–æ—Ç–µ
    """
    display.text(str, 0, (line % 8) * 8, 1, font_name="/lib/font5x8.bin")  # –í—ã–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

# –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞
while True:
    display.fill(0)  # –û—á–∏—â–∞–µ–º —ç–∫—Ä–∞–Ω (–∑–∞–ø–æ–ª–Ω—è–µ–º —á–µ—Ä–Ω—ã–º)

    display_text("Hello, World!", 0)  # –í—ã–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É –¥–∏—Å–ø–ª–µ—è
    display_text("It's DeskPi PicoMate!", 2)  # –í—ã–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –Ω–∞ —Ç—Ä–µ—Ç—å—é —Å—Ç—Ä–æ–∫—É –¥–∏—Å–ø–ª–µ—è

    display.show()  # –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏—Å–ø–ª–µ–π, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞–ª–∏ –≤–∏–¥–∏–º—ã–º–∏

    time.sleep(0.5)  # –î–µ–ª–∞–µ–º –ø–∞—É–∑—É –≤ 0.5 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
