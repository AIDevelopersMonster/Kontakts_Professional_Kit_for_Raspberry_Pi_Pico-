# Video https://youtu.be/KzB65K-rlGk
# Post http://kontakts.ru/showthread.php/40884?p=86207#post86207
# Telega https://t.me/MrMicroPython
# üìú –õ–∏—Ü–µ–Ω–∑–∏—è üîó Creative Commons Attribution-ShareAlike 4.0 (CC BY-SA)
# üìÇ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø–ª–∞—Ç—ã PicoMate https://wiki.deskpi.com/picomate/#pinout-diagram
import board  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∏–Ω–∞–º–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
import digitalio  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ü–∏—Ñ—Ä–æ–≤—ã–º–∏ –≤—Ö–æ–¥–∞–º–∏/–≤—ã—Ö–æ–¥–∞–º–∏

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PIR-–¥–∞—Ç—á–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è (–ø–æ–¥–∫–ª—é—á—ë–Ω –∫ GP28)
pir_sensor = digitalio.DigitalInOut(board.GP28)  # –£–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –¥–∞—Ç—á–∏–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ GP28
pir_sensor.direction = digitalio.Direction.INPUT  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∏–Ω –∫–∞–∫ –≤—Ö–æ–¥
pir_sensor.pull = digitalio.Pull.DOWN  # –í–∫–ª—é—á–∞–µ–º –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—â–∏–π —Ä–µ–∑–∏—Å—Ç–æ—Ä –∫ GND (Pull.DOWN)

# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∞—Ç—á–∏–∫–∞
last_value = pir_sensor.value

# –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è PIR-–¥–∞—Ç—á–∏–∫–∞
while True:
    if last_value != pir_sensor.value:  # –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å (—Å—Ä–∞–±–æ—Ç–∞–ª –∏–ª–∏ –ø–µ—Ä–µ—Å—Ç–∞–ª —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å)
        last_value = pir_sensor.value  # –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        # –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –¥–≤–∏–∂–µ–Ω–∏–∏ –∏–ª–∏ –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏
        print('Motion ' + ('detected!' if pir_sensor.value else 'removed!'))
